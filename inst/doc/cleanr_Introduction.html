<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Andreas Dominik Cullmann" />


<title>An Introduction to cleanr</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">An Introduction to cleanr</h1>
<h4 class="author"><em>Andreas Dominik Cullmann</em></h4>
<h4 class="date"><em>2019-03-13, 10:52:49</em></h4>



<div id="the-intro-to-the-intro" class="section level1">
<h1>The Intro to the Intro</h1>
<p>Coding is an art, but most of the code we write is more or less dreadful. Many tried to teach us how to write code less dreadful, be it implicitly as <span class="citation">Kernighan and Ritchie (1988)</span> did, be it explicitly as <span class="citation">Martin (2008)</span> did.</p>
<p>If you are concerned about your coding style, you will probably want to lint your codes with <a href="https://CRAN.R-project.org/package=lintr">lintr</a> or even reformat it using <a href="https://CRAN.R-project.org/package=formatR">formatR</a>.</p>
<p>This package tries to help you with your code`s layout: it checks our code for files too long or wide, functions with too many lines, too wide lines, too many arguments or too many levels of nesting. Note that it’s <em>not</em> a static code analyser like <a href="https://CRAN.R-project.org/package=lintr">lintr</a>.</p>
</div>
<div id="a-first-example" class="section level1">
<h1>A first example</h1>
<p>You can use <em>cleanr</em> to check the layout of a file:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">path &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;runit_tests&quot;</span>, <span class="st">&quot;wrappers.r&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;cleanr&quot;</span>)
<span class="kw">print</span>(cleanr::<span class="kw">check_file_layout</span>(path))</code></pre></div>
<pre><code>## Warning in file(con, &quot;r&quot;): file(&quot;&quot;) only supports open = &quot;w+&quot; and open = &quot;w
## +b&quot;: using the former

## Warning in file(con, &quot;r&quot;): file(&quot;&quot;) only supports open = &quot;w+&quot; and open = &quot;w
## +b&quot;: using the former</code></pre>
<pre><code>## [1] TRUE</code></pre>
<p>Okay, looks good. Let’s make it look worse.</p>
</div>
<div id="options" class="section level1">
<h1>Options</h1>
<p><em>cleanr</em> is controlled by a list of options named “cleanr”. You can retrieve it either via <code>options(&quot;cleanr&quot;)</code> or via a convenience function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cleanr::<span class="kw">get_cleanr_options</span>(<span class="dt">flatten_list =</span> <span class="ot">FALSE</span>)</code></pre></div>
<pre><code>## $max_file_width
## [1] 80
## 
## $max_file_length
## [1] 300
## 
## $max_lines
## [1] 65
## 
## $max_lines_of_code
## [1] 50
## 
## $max_num_arguments
## [1] 5
## 
## $max_nesting_depth
## [1] 3
## 
## $max_line_width
## [1] 80
## 
## $check_return
## [1] TRUE</code></pre>
<div id="arguments-to-check-functions" class="section level2">
<h2>Arguments to Check Functions</h2>
<p>You can change any of those options on the fly (leaving the options set untouched). The real life</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cleanr::<span class="kw">check_file_layout</span>(path, <span class="dt">max_file_width =</span> <span class="dv">79</span>)</code></pre></div>
<p>produces conditions that would stop this vignette from getting compiled, this is why we here assert these conditions:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(tools::<span class="kw">assertCondition</span>(cleanr::<span class="kw">check_file_layout</span>(path, 
                                                     <span class="dt">max_file_width =</span> <span class="dv">79</span>), 
                             <span class="kw">c</span>(<span class="st">&quot;cleanr&quot;</span>, <span class="st">&quot;error&quot;</span>,  <span class="st">&quot;condition&quot;</span>))
)</code></pre></div>
<pre><code>## [[1]]
## &lt;simpleWarning in file(con, &quot;r&quot;): file(&quot;&quot;) only supports open = &quot;w+&quot; and open = &quot;w+b&quot;: using the former&gt;
## 
## [[2]]
## &lt;simpleWarning in file(con, &quot;r&quot;): file(&quot;&quot;) only supports open = &quot;w+&quot; and open = &quot;w+b&quot;: using the former&gt;</code></pre>
</div>
<div id="setting-options" class="section level2">
<h2>Setting Options</h2>
<p>You can set options using the convenience function:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cleanr::<span class="kw">set_cleanr_options</span>(<span class="dt">max_file_width =</span> <span class="dv">75</span>, 
                           <span class="dt">max_file_length =</span> <span class="dv">20</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(tools::<span class="kw">assertCondition</span>(cleanr::<span class="kw">check_file_layout</span>(path), 
                             <span class="kw">c</span>(<span class="st">&quot;cleanr&quot;</span>, <span class="st">&quot;error&quot;</span>,  <span class="st">&quot;condition&quot;</span>))
)</code></pre></div>
<pre><code>## [[1]]
## &lt;simpleWarning in file(con, &quot;r&quot;): file(&quot;&quot;) only supports open = &quot;w+&quot; and open = &quot;w+b&quot;: using the former&gt;
## 
## [[2]]
## &lt;simpleWarning in file(con, &quot;r&quot;): file(&quot;&quot;) only supports open = &quot;w+&quot; and open = &quot;w+b&quot;: using the former&gt;</code></pre>
</div>
</div>
<div id="checking-for-file-layout" class="section level1">
<h1>Checking for File Layout</h1>
<p>Files too long or too wide are hard to read. You can check for a file’s layout, i.e. for its lines’ width and for the number of its lines. You have already seen how to check for file layout:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cleanr::<span class="kw">set_cleanr_options</span>(<span class="dt">reset =</span> <span class="ot">TRUE</span>)
path &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;source&quot;</span>, <span class="st">&quot;R&quot;</span>, <span class="st">&quot;checks.R&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;cleanr&quot;</span>)
<span class="kw">print</span>(cleanr::<span class="kw">check_file_layout</span>(path)) </code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>We override some option by argument:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(tools::<span class="kw">assertCondition</span>(cleanr::<span class="kw">check_file_layout</span>(path, 
                                                       <span class="dt">max_file_length =</span> <span class="dv">100</span>), 
                             <span class="kw">c</span>(<span class="st">&quot;cleanr&quot;</span>, <span class="st">&quot;error&quot;</span>,  <span class="st">&quot;condition&quot;</span>))
)</code></pre></div>
<pre><code>## [[1]]
## &lt;error in cleanr::check_file_layout(path, max_file_length = 100): /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/checks.R: 256 lines in file.&gt;
## 
## [[2]]
## &lt;error in cleanr::check_file_layout(path, max_file_length = 100): /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/checks.R: 256 lines in file.&gt;</code></pre>
</div>
<div id="checking-for-function-layout" class="section level1">
<h1>Checking for Function Layout</h1>
<p>Functions should</p>
<ul>
<li>not have too many arguments,</li>
<li>not have too many levels of nesting,</li>
<li>neither have too many lines nor</li>
<li>have too many lines of code,</li>
<li>not have lines too wide and</li>
<li>explicitly return an object.</li>
</ul>
<p>You can check all functions defined in a file:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(<span class="kw">suppressWarnings</span>(cleanr::<span class="kw">check_functions_in_file</span>(path)))</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>And again we override some option by argument:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(tools::<span class="kw">assertCondition</span>(<span class="kw">suppressWarnings</span>(cleanr::<span class="kw">check_functions_in_file</span>(path,
                                                                        <span class="dt">max_num_arguments =</span> <span class="dv">1</span>)), 
                       <span class="kw">c</span>(<span class="st">&quot;cleanr&quot;</span>, <span class="st">&quot;error&quot;</span>,  <span class="st">&quot;condition&quot;</span>))
)</code></pre></div>
<pre><code>## [[1]]
## &lt;error in cleanr::check_functions_in_file(path, max_num_arguments = 1): /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/checks.R  check_file_length  found 2 arguments, max_num_arguments was 1
## /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/checks.R  check_file_width  found 2 arguments, max_num_arguments was 1
## /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/checks.R  check_line_width  found 2 arguments, max_num_arguments was 1
## /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/checks.R  check_nesting_depth  found 2 arguments, max_num_arguments was 1
## /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/checks.R  check_num_arguments  found 2 arguments, max_num_arguments was 1
## /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/checks.R  check_num_lines  found 2 arguments, max_num_arguments was 1
## /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/checks.R  check_num_lines_of_code  found 2 arguments, max_num_arguments was 1
## /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/checks.R  check_return  found 2 arguments, max_num_arguments was 1&gt;
## 
## [[2]]
## &lt;error in cleanr::check_functions_in_file(path, max_num_arguments = 1): /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/checks.R  check_file_length  found 2 arguments, max_num_arguments was 1
## /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/checks.R  check_file_width  found 2 arguments, max_num_arguments was 1
## /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/checks.R  check_line_width  found 2 arguments, max_num_arguments was 1
## /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/checks.R  check_nesting_depth  found 2 arguments, max_num_arguments was 1
## /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/checks.R  check_num_arguments  found 2 arguments, max_num_arguments was 1
## /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/checks.R  check_num_lines  found 2 arguments, max_num_arguments was 1
## /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/checks.R  check_num_lines_of_code  found 2 arguments, max_num_arguments was 1
## /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/checks.R  check_return  found 2 arguments, max_num_arguments was 1&gt;</code></pre>
</div>
<div id="checking-for-file-and-function-layout" class="section level1">
<h1>Checking for File and Function Layout</h1>
<p><em>cleanr</em> comes with wrappers to check for file and function layout in one go: <em>check_file</em> runs the file and function layout checks on a file and <em>check_directory</em> runs them on all files (matching a given pattern) in a directory.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(<span class="kw">suppressWarnings</span>(cleanr::<span class="kw">check_file</span>(path)))</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">path &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;runit_tests&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;cleanr&quot;</span>)
<span class="kw">print</span>(<span class="kw">suppressWarnings</span>(cleanr::<span class="kw">check_directory</span>(path,
                                               <span class="dt">check_return =</span> <span class="ot">FALSE</span>)))</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>To run <em>cleanr</em> on its own codes, we need to load its internal functions first:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">path &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;source&quot;</span>, <span class="st">&quot;R&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;cleanr&quot;</span>)
cleanr::<span class="kw">load_internal_functions</span>(<span class="st">&quot;cleanr&quot;</span>)
<span class="kw">print</span>(tools::<span class="kw">assertCondition</span>(<span class="kw">suppressWarnings</span>(cleanr::<span class="kw">check_directory</span>(path)), 
                       <span class="kw">c</span>(<span class="st">&quot;cleanr&quot;</span>, <span class="st">&quot;error&quot;</span>,  <span class="st">&quot;condition&quot;</span>))
)</code></pre></div>
<pre><code>## [[1]]
## &lt;error in cleanr::check_directory(path): /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R   /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/internals.R  throw  found no return() statement at all.
## /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R   /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/options.R: line 91 counts 84 characters.
## /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R   /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/throw.R  throw  found no return() statement at all.
## /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R   /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/wrappers.R: 314 lines in file.
##  /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/wrappers.R  check_function_layout  found 8 arguments, max_num_arguments was 5&gt;
## 
## [[2]]
## &lt;error in cleanr::check_directory(path): /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R   /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/internals.R  throw  found no return() statement at all.
## /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R   /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/options.R: line 91 counts 84 characters.
## /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R   /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/throw.R  throw  found no return() statement at all.
## /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R   /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/wrappers.R: 314 lines in file.
##  /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/wrappers.R  check_function_layout  found 8 arguments, max_num_arguments was 5&gt;</code></pre>
</div>
<div id="disabling-checks" class="section level1">
<h1>Disabling checks</h1>
<p>To disable any check, set the corresponding option or argument to <code>NULL</code> or <code>FALSE</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cleanr::<span class="kw">set_cleanr_options</span>(<span class="dt">reset =</span> <span class="ot">TRUE</span>)
cleanr::<span class="kw">load_internal_functions</span>(<span class="st">&quot;cleanr&quot;</span>)
path &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;source&quot;</span>, <span class="st">&quot;R&quot;</span>, <span class="st">&quot;wrappers.R&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;cleanr&quot;</span>)

<span class="co"># will produce a condition:</span>
r &lt;-<span class="st"> </span>tools::<span class="kw">assertCondition</span>(cleanr::<span class="kw">check_functions_in_file</span>(path, 
                                                            <span class="dt">check_return =</span> <span class="ot">FALSE</span>),
                            <span class="kw">c</span>(<span class="st">&quot;cleanr&quot;</span>, <span class="st">&quot;error&quot;</span>,  <span class="st">&quot;condition&quot;</span>))
<span class="kw">print</span>(r)</code></pre></div>
<pre><code>## [[1]]
## &lt;error in cleanr::check_functions_in_file(path, check_return = FALSE): /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/wrappers.R  check_function_layout  found 8 arguments, max_num_arguments was 5&gt;
## 
## [[2]]
## &lt;error in cleanr::check_functions_in_file(path, check_return = FALSE): /tmp/RtmphxSVVp/Rinstdb5463036f7/cleanr/source/R/wrappers.R  check_function_layout  found 8 arguments, max_num_arguments was 5&gt;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># set argument to disable the check causing the condition:</span>
r &lt;-<span class="st"> </span>cleanr::<span class="kw">check_functions_in_file</span>(path, <span class="dt">check_return =</span> <span class="ot">FALSE</span>, 
                                     <span class="dt">max_num_arguments =</span> <span class="ot">FALSE</span>)
<span class="kw">print</span>(r)</code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>To completely disable all checks use:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">co &lt;-<span class="st"> </span><span class="kw">get_cleanr_options</span>(<span class="dt">flatten_list =</span> <span class="ot">FALSE</span>)
co &lt;-<span class="st"> </span><span class="kw">lapply</span>(co, function(x) x ==<span class="st"> </span><span class="ot">FALSE</span>)
<span class="kw">options</span>(<span class="st">&quot;cleanr&quot;</span> =<span class="st"> </span><span class="kw">list</span>(<span class="dt">cleanr =</span> co))
<span class="kw">get_cleanr_options</span>() </code></pre></div>
<pre><code>##    cleanr.max_file_width   cleanr.max_file_length         cleanr.max_lines 
##                    FALSE                    FALSE                    FALSE 
## cleanr.max_lines_of_code cleanr.max_num_arguments cleanr.max_nesting_depth 
##                    FALSE                    FALSE                    FALSE 
##    cleanr.max_line_width      cleanr.check_return 
##                    FALSE                    FALSE</code></pre>
<p>Now run on any directory, <code>check_directory</code> will always return <code>TRUE</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">path &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;source&quot;</span>, <span class="st">&quot;R&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;cleanr&quot;</span>)
cleanr::<span class="kw">load_internal_functions</span>(<span class="st">&quot;cleanr&quot;</span>)
<span class="kw">print</span>(cleanr::<span class="kw">check_directory</span>(path)) </code></pre></div>
<pre><code>## [1] TRUE</code></pre>
</div>
<div id="references" class="section level1 unnumbered">
<h1>References</h1>
<div id="refs" class="references">
<div id="ref-KR">
<p>Kernighan, B. W., and D. M. Ritchie. 1988. <em>The C Programming Language, Second Edition</em>. Englewood Cliffs, New Jersey: Prentice-Hall.</p>
</div>
<div id="ref-cc">
<p>Martin, R.C. 2008. <em>Clean Code: A Handbook of Agile Software Craftsmanship</em>. Pearson Education.</p>
</div>
</div>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
